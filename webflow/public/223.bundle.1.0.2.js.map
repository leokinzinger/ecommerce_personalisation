{"version":3,"file":"223.bundle.1.0.2.js","mappings":"0HAiCA,SAASA,EAAkBC,EAAQC,GAG3BD,EAAOE,MADPD,EACeD,EAAOG,aAAa,aAEpBH,EAAOG,aAAa,qBAE3C,CCtCO,SAASC,KDFT,SAAoBC,EAAQC,EAAgBC,EAAgBC,EAAkB,KAAKC,GAAa,GACnG,MAAMC,EAAcC,SAASC,eAAeP,GAG5CK,EAAYG,cAAcC,UAAUC,OAAO,UAG3CL,EAAYM,SAAWC,MAAOC,IAC1BA,EAAMC,iBACN,MAAMC,EAAeV,EAAYW,cAAc,yBAG/CtB,EAAkBqB,GAAc,GAEhC,IACI,MAAME,EAAahB,EAAe,IAAIiB,SAASb,GAAaQ,GACtDM,QAAiBjB,EAAee,GACtCd,EAAgBgB,EACpB,CAAE,MAAOC,GACLC,QAAQD,MAAMA,EAClB,CAAE,QAEE1B,EAAkBqB,GAAc,EACpC,EAER,CCtBIO,CAAU,gCAAgCC,EAAkBrB,EAAeC,EAC/E,CAEA,SAASoB,EAAkBC,GAEvB,MAAMC,EAAgBnB,SAASC,eAAe,iBACxCmB,EAAkBpB,SAASU,cAAc,wBAgB/C,OAfGU,GACCA,EAAgBhB,SAGVe,EAuDWE,mBAAmB,YAD3B,uCApDW,CACpBC,KAAMJ,EAASK,IAAI,iBACnBC,KAAMN,EAASK,IAAI,gBACnBE,aAAcP,EAASK,IAAI,oBAC3BG,YAAaR,EAASK,IAAI,mBAC1BI,MAAOT,EAASK,IAAI,iBACpBK,aAAcV,EAASK,IAAI,kBAInC,CAEAjB,eAAeV,EAAgBsB,GAE3BH,QAAQc,IAAIX,GAGZ,MAAML,QAAiBiB,MAAM,qFAAsF,CAC/GC,OAAQ,OACRC,KAAMC,KAAKC,UAAUhB,GACrBiB,QAAS,CACL,eAAgB,sBAIlBC,QAAavB,EAASwB,OAE5B,OAAIxB,EAASyB,GAEF,CAACC,SAAQ,EAAMH,KAAMA,GAGrB,CAACG,SAAQ,EAAOH,KAAM,KAErC,CAEA,SAASvC,EAAiBgB,GACtB,GAAIA,EAAS0B,QAAS,CAClBxB,QAAQc,IAAI,YACZd,QAAQc,IAAIhB,GACEb,SAASC,eAAe,mBAChCuC,IAAM3B,EAASuB,KAAKK,UAEJzC,SAASC,eAAe,iBAgBtByC,iBAAiB,oBAGrCC,SAAQ,SAASC,GACrBA,EAAOC,WAAWC,YAAYF,EAClC,GAlBA,MACI7B,QAAQc,IAAI,UAEpB,C","sources":["webpack://webflow_dev_template/./src/utils.js","webpack://webflow_dev_template/./src/generate_products.js"],"sourcesContent":["export function setupForm (formId, onSubmitCustom, submitFormData, responseHandler = null,show_success=true) {\n    const formElement = document.getElementById(formId);\n\n    // Remove Webflow's form styling class\n    formElement.parentElement.classList.remove('w-form');\n\n    // Set the form submission event handler\n    formElement.onsubmit = async (event) => {\n        event.preventDefault();\n        const submitButton = formElement.querySelector('[w-el=\"SubmitButton\"]');\n\n        // Handle the submit button state during form processing\n        handleButtonState(submitButton, true);\n\n        try {\n            const customData = onSubmitCustom(new FormData(formElement),event);\n            const response = await submitFormData(customData);\n            responseHandler(response);\n        } catch (error) {\n            console.error(error);\n        } finally {\n            // Restore the submit button to its initial state\n            handleButtonState(submitButton, false);\n        }\n    };\n}\n\n/**\n * Handles the state of the submit button during form processing.\n * \n * @param {HTMLElement} button - The submit button element.\n * @param {boolean} isLoading - Indicates if the form is in the loading state.\n */\nfunction handleButtonState(button, isLoading) {\n\n    if (isLoading) {\n        button.value = button.getAttribute('data-wait');\n    } else {\n        button.value = button.getAttribute('data-initial-state');\n    }\n}","import { setupForm } from \"./utils\"\n\nexport function render(){\n    setupForm('wf-form-Generate-Product-Form',transformFormData,submitFormData,responseHandler);\n}\n\nfunction transformFormData(formData) {\n\n    const image_wrapper = document.getElementById('image_wrapper');\n    const starter_wrapper = document.querySelector('.starter-description');\n    if(starter_wrapper) {\n        starter_wrapper.remove();\n    }\n    \n    addLoader(image_wrapper);\n    \n    const transformedData = {\n        form: formData.get('product_shape'),\n        sole: formData.get('product_sole'),\n        bodyMaterial: formData.get('product_material'),\n        bodyPattern: formData.get('product_pattern'),\n        laces: formData.get('product_laces'),\n        generalstyle: formData.get('product_gender')\n    }\n\n    return transformedData;\n}\n\nasync function submitFormData (formData) {\n    // Assuming `formData` is your FormData object\n    console.log(formData)\n\n    // Send the POST request to the server\n    const response = await fetch(`https://us-central1-quiet-amp-415709.cloudfunctions.net/genai_for_product_design_1`, {\n        method: 'POST',\n        body: JSON.stringify(formData),\n        headers: {\n            \"Content-Type\": \"application/json\"\n        }\n    });\n\n    const data = await response.json()\n\n    if (response.ok)\n  \n        return {success:true, data: data};\n    \n    else {\n        return {success:false, data: null};\n    }\n}\n\nfunction responseHandler (response) {\n    if (response.success) {\n        console.log('success!');\n        console.log(response);\n        const image = document.getElementById('generated_image');\n        image.src = response.data.image_url;\n\n        const image_wrapper = document.getElementById('image_wrapper');\n\n        removeLoader(image_wrapper);\n    } else {\n        console.log('failed!');\n    }\n}\n\nfunction addLoader(parentElement) {\n    const html = `<div class=\"skeleton-loader\"></div>`\n    return parentElement.insertAdjacentHTML(\"beforeend\", html);\n}\n\nfunction removeLoader (parentElement) {\n\n    // Find all children with the 'skeleton-loader' class\n    var loaders = parentElement.querySelectorAll('.skeleton-loader');\n\n    // Loop through the NodeList and remove each element\n    loaders.forEach(function(loader) {\n        loader.parentNode.removeChild(loader);\n    });\n\n}"],"names":["handleButtonState","button","isLoading","value","getAttribute","render","formId","onSubmitCustom","submitFormData","responseHandler","show_success","formElement","document","getElementById","parentElement","classList","remove","onsubmit","async","event","preventDefault","submitButton","querySelector","customData","FormData","response","error","console","setupForm","transformFormData","formData","image_wrapper","starter_wrapper","insertAdjacentHTML","form","get","sole","bodyMaterial","bodyPattern","laces","generalstyle","log","fetch","method","body","JSON","stringify","headers","data","json","ok","success","src","image_url","querySelectorAll","forEach","loader","parentNode","removeChild"],"sourceRoot":""}